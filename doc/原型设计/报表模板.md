七、📄 报表模板 UI 配置结构说明（字段绑定界面）
目标是配置一张报表时，能够：

选择一个比价方案

设置主表字段（产品编号、产品名称等）

动态配置列头：分析对象维度 × 指标（如 含税价 / 差异额 / 差异率）

配置渲染样式（对比模式 / 分组模式）

✅ 报表模板配置结构 JSON 示例
json
复制
编辑
{
  "template_name": "同产品采购比价分析报表",
  "compare_scheme_id": "SCHM001",
  "main_fields": [
    {"field_code": "product_code", "field_name": "产品编号"},
    {"field_code": "product_name", "field_name": "产品名称"}
  ],
  "dynamic_columns": [
    {
      "dimension_fields": ["supplier_name", "purchase_mode"],
      "metrics": [
        {"metric_code": "price_with_tax", "alias": "含税价"},
        {"metric_code": "diff_amount", "alias": "差异额"},
        {"metric_code": "diff_ratio", "alias": "差异率"}
      ]
    }
  ],
  "render_style": "横向对比",
  "sort_order": ["product_code"]
}
✅ 报表模板配置表单结构（表单 UI 草图）
配置项	类型	说明
报表名称	输入框	模板展示的名称
绑定比价方案	下拉框	选择一个已配置的比价方案（供字段/指标选择）
主表字段配置	多选框	选取产品信息字段，作为左侧主轴
动态列维度	拖拽多选	拖入需要作为分析对象的维度，如供应商、采购模式等
动态列指标	拖拽多选	拖入指标，如含税价、差异额、差异率
排序字段	拖拽排序	指定主表排序字段
渲染样式	单选框	横向对比 / 嵌套分组 / 纵向对比等渲染模式

✅ 原型草图结构建议（结构描述）
markdown
复制
编辑
[ 报表模板配置 ]

1. 报表基础信息区域
   - 报表名称：_____________________
   - 绑定比价方案： [ 选择 ▼ ]
   - 渲染样式： ( ) 横向对比 ( ) 分组对比

2. 字段选择区域
   - 左侧：产品主字段（可多选，如 产品编号、名称）
   - 中间：分析对象维度（可拖拽排序）
   - 右侧：指标字段（可拖拽排序）

   -------------------------------------------------
   | 产品编号 | 产品名称 || 供应商A | 含税价 | 差异率 | 差异额 || 供应商B ...
   -------------------------------------------------
✅ 可在页面上通过拖拽维度字段和指标字段，动态配置出类似你截图的报表结构。

✅ 字段来源说明
动态列维度字段：来自比价方案配置的分析维度（字段路径已绑定到数据集字段）

指标字段：来自指标库或比价方案定义的计算指标（如 diff_ratio、price_with_tax）
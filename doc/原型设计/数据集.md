### **【数据集】原型与JSON **

**核心职责**：**组合**多个已封装好的【数据模型】（或动态源），并通过**选用、别名、冲突解决**，最终形成一个可供分析的“虚拟宽表”。**它不再进行任何映射或计算**。

#### **原型 (Plaintext) - 数据集**
```
+--------------------------------------------------------------------------------------------------+
|  <-- 返回  |  创建/编辑数据集: 采购全链路融合分析                                 [取消] [保存数据集]  |
|==================================================================================================|
|  [ ① 基本信息与构建方式 ]                                                                        |
|  ----------------------------------------------------------------------------------------------  |
|  * 数据集名称: [ 采购全链路融合分析... ]                                                         |
|  * 数据集编码: [ DS_PURCHASE_FULL_LINK ]                                                         |
|  * 构建方式:   (o) 通过组合预定义的数据模型   ( ) 通过自定义SQL ...                               |
|                                                                                                  |
|--------------------------------------------------------------------------------------------------|
|  [ ② 数据模型组合与关联 ]                                                                        |
|  ----------------------------------------------------------------------------------------------  |
|  * 主数据模型: [ 采购协议模型 | v ]                                                              |
|  [ + 添加关联数据模型 ]                                                                          |
|  +--[关联数据模型 1]------------------------------------------------------------------------+    |
|  |  关联模型:   [ 采购订单历史模型 | v ]                                                      |    |
|  |  关联方式:   [ LEFT JOIN | v ]         关联条件: [ 主模型.产品编码 = 关联模型.产品编码 ]  |    |
|  +------------------------------------------------------------------------------------------+    |
|  [ 加载并预览字段 ] <-- 点击后，下方表格会根据JOIN逻辑，加载所有模型的、**已映射好**的字段     |
|                                                                                                  |
|--------------------------------------------------------------------------------------------------|
|  [ ③ 字段选用、别名与冲突解决 ]                                                                  |
|  ----------------------------------------------------------------------------------------------  |
| | 来源模型       | 字段业务名    | 身份(来自模型)  | 数据集字段别名 (可修改) | 是否选用 |            |
| |----------------|---------------|-----------------|-------------------------|----------|            |
| | 采购协议模型   | 协议价(含税)  | 指标: 协议价(P001)| [协议-协议价]           |   [√]    |            |
| | 采购订单历史模型 | 订单价(含税)  | 指标: 协议价(P001)| [订单-协议价]           |   [√]    |            |
| | 采购协议模型   | 供应商        | 维度: 供应商    | [供应商名称]            |   [√]    |            |
|--------------------------------------------------------------------------------------------------|
|  [!] 冲突解决: 指标 [协议价(P001)] 在多个模型中存在。请指定主导字段:                             |
|  (o) [协议-协议价] (来自主模型)   ( ) [订单-协议价]                                            |
|--------------------------------------------------------------------------------------------------|
|                                                                                                  |
+--------------------------------------------------------------------------------------------------+
```

#### **配套JSON示例 (数据集)**
```json
{
  "datasetId": "ds_01",
  "datasetCode": "DS_PURCHASE_FULL_LINK",
  "datasetName": "采购全链路融合分析数据集",
  
  // -- 对应原型第二部分 --
  "sourceConfig": {
    "type": "MODEL_COMPOSITION", 
    "primaryDataModelId": "dm_agreement",
    "relations": [
      {
        "relatedDataModelId": "dm_order_hist",
        "joinType": "LEFT_JOIN",
        "joinCondition": "t1.product_code = t2.product_code"
      }
    ]
  },
  
  // -- 对应原型第三部分 --
  "fieldSelections": {
    // 最终选用的字段清单
    "selections": [
      {
        "sourceFieldId": "dmf_007", // 来源于“数据模型字段”表的ID (协议价(含税))
        "alias": "协议-协议价"
      },
      {
        "sourceFieldId": "dmf_102", // 来源于另一个模型的字段 (订单价(含税))
        "alias": "订单-协议价"
      },
      // ...
    ],
    // 冲突解决方案
    "conflictResolutions": [
      {
        "conceptId": "P001", // 冲突的逻辑概念ID (协议价)
        "dominantAlias": "协议-协议价" // 指定了哪个别名字段作为主导
      }
    ]
  },
  "status": "ACTIVE"
}
```